(()=>{var w=Object.defineProperty;var c=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var u=(t,e,s)=>e in t?w(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,l=(t,e)=>{for(var s in e||(e={}))P.call(e,s)&&u(t,s,e[s]);if(c)for(var s of c(e))I.call(e,s)&&u(t,s,e[s]);return t};/**
* @preserve
* Filename: config.js
*
* Created: 04/05/2025 (19:35:57)
* Created by: Lorenzo Saibal Forti <lorenzo.forti@gmail.com>
*
* Last update: 06/05/2025 (15:20:56)
* Updated by: Lorenzo Saibal Forti <lorenzo.forti@gmail.com>
*
* Copyleft: 2025 - Tutti i diritti riservati
*
* Comments:
*/var m={idEmbedContainer:"embed-container",idPosterContainer:"poster-container",idPosterImg:"poster-img",idBtnPlay:"btn-play",activeIframeClass:"isactive",textVideoTitle:"Video Youtube",textVideoDescription:"Guarda questo video incorporato nel sito da Youtube",textMissingVideoId:"ID video mancante",textBtn:"Riproduci",textVideo:"video",videoStartAt:0,posterQuality:"hqdefault"};/**
* @preserve
* Filename: setStyle.js
*
* Created: 30/04/2025 (16:26:32)
* Created by: Lorenzo Saibal Forti <lorenzo.forti@gmail.com>
*
* Last update: 07/05/2025 (09:41:04)
* Updated by: Lorenzo Saibal Forti <lorenzo.forti@gmail.com>
*
* Copyleft: 2024 - Tutti i diritti riservati
*
* Comments:
*/var p=()=>{let t=new CSSStyleSheet;return t.replaceSync(` :host, :host *, :host *::before, :host *::after { box-sizing: border-box; } :host { contain: content; display: block; width: 100%; aspect-ratio: var(--aspect-ratio); --aspect-ratio: var(--embed-youtube-aspect-ratio, 16 / 9); --aspect-ratio-short: var(--embed-youtube-aspect-ratio-short, 9 / 16); } @media (max-width: 40em) { :host([short]) { aspect-ratio: var(--aspect-ratio-short); } } #embed-container { position: relative; width: 100%; height: 100%; aspect-ratio: 16 / 9; overflow: hidden; cursor: pointer; } #embed-container.isactive::before, #embed-container.isactive > #btn-play { display: none; } iframe, #poster-img { position: absolute; width: 100%; height: 100%; inset: 0; } iframe { border: 0; } #poster-img { object-fit: cover; box-sizing: border-box; } #btn-play { width: 68px; height: 48px; background-color: transparent; background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 48"><path d="M66.52 7.74c-.78-2.93-2.49-5.41-5.42-6.19C55.79.13 34 0 34 0S12.21.13 6.9 1.55c-2.93.78-4.63 3.26-5.42 6.19C.06 13.05 0 24 0 24s.06 10.95 1.48 16.26c.78 2.93 2.49 5.41 5.42 6.19C12.21 47.87 34 48 34 48s21.79-.13 27.1-1.55c2.93-.78 4.64-3.26 5.42-6.19C67.94 34.95 68 24 68 24s-.06-10.95-1.48-16.26z" fill="red"/><path d="M45 24 27 14v20" fill="white"/></svg>'); z-index: 1; border: 0; } #btn-play:before { content: ""; border-style: solid; border-width: 10px 0 10px 16px; border-color: transparent transparent transparent #fff; } #btn-play, #btn-play:before, #error-message { position: absolute; top: 50%; left: 50%; transform: translate3d(-50%, -50%, 0); cursor: inherit; } .isactive { cursor: unset; } `),t};/**
* @preserve
* Filename: initShadowDom.js
*
* Created: 30/04/2025 (16:48:32)
* Created by: Lorenzo Saibal Forti <lorenzo.forti@gmail.com>
*
* Last update: 06/05/2025 (14:34:19)
* Updated by: Lorenzo Saibal Forti <lorenzo.forti@gmail.com>
*
* Copyleft: 2025 - Tutti i diritti riservati
*
* Comments:
*/var g=t=>{let{config:e}=t;t.attachShadow({mode:"open"}),t.shadowRoot.adoptedStyleSheets=[p()],t.shadowRoot.innerHTML=`<div id="${e.idEmbedContainer}"><picture id="${e.idPosterContainer}"><img part="poster" id="${e.idPosterImg}" referrerpolicy="origin" loading="lazy" fetchpriority="low" alt=""></picture><button id="${e.idBtnPlay}" part="play-button"></button></div>`,t.domContainer=t.shadowRoot.getElementById(e.idEmbedContainer),t.domPosterContainer=t.shadowRoot.getElementById(e.idPosterContainer),t.domImgPoster=t.shadowRoot.getElementById(e.idPosterImg),t.domPlayButton=t.shadowRoot.getElementById(e.idBtnPlay)};/**
* @preserve
* Filename: util.js
*
* Created: 30/04/2025 (17:20:44)
* Created by: Lorenzo Saibal Forti <lorenzo.forti@gmail.com>
*
* Last update: 06/05/2025 (12:25:13)
* Updated by: Lorenzo Saibal Forti <lorenzo.forti@gmail.com>
*
* Copyleft: 2025 - sss diritti riservati
*
* Comments:
*/var h=(()=>{let t=!1,e=(s,o)=>{let r=document.createElement("link");r.rel=s,r.href=o,r.crossOrigin="true",document.head.append(r)};return s=>{t||s.noPreconnect||s.globalNoPreconnect||(e("preconnect","https://i.ytimg.com/"),e("preconnect","https://s.ytimg.com"),s.noCookie?e("preconnect","https://www.youtube-nocookie.com"):(e("preconnect","https://www.youtube.com"),e("preconnect","https://www.google.com"),e("preconnect","https://googleads.g.doubleclick.net"),e("preconnect","https://static.doubleclick.net")),t=!0)}})(),b=t=>{let{config:e}=t,{videoId:s}=t,o=t.videoTitle||e.textVideoTitle,r=t.description||e.textVideoDescription,i=t.noCookie?"-nocookie":"",n=t.playlistId?`?listType=playlist&list=${t.playlistId}`:`${s}`,a=document.createElement("script");a.id=`json-${s}`,a.type="application/ld+json",a.text=JSON.stringify({"@context":"https://schema.org","@type":"VideoObject",name:`${o}`,description:`${r}`,thumbnailUrl:`https://i.ytimg.com/vi/${s}/hqdefault.jpg`,contentUrl:`https://www.youtube.com/watch?v=${s}`,embedUrl:`https://www.youtube${i}.com/embed/${n}`}),t.prepend(a)},f=t=>{let{config:e}=t;return t.playText&&t.videoTitle?`${t.playText} ${t.videoTitle}`:t.playText?t.playText:t.videoTitle?`${e.textBtn} ${t.videoTitle}`:`${e.textBtn} ${e.textVideo}`};/**
* @preserve
* Filename: embed-youtube.js
*
* Created: 05/05/2025 (12:08:23)
* Created by: Lorenzo Saibal Forti <lorenzo.forti@gmail.com>
*
* Last update: 07/05/2025 (16:39:02)
* Updated by: Lorenzo Saibal Forti <lorenzo.forti@gmail.com>
*
* Copyleft: 2025 - Tutti i diritti riservati
*
* Comments:
*/(()=>{"use strict";let t=document.currentScript||document.getElementsByTagName("body")[0];class e extends HTMLElement{constructor(){super(),this.config=l(l({},m),window.embedYouTubeConfig||{}),this.scheduleUpdate,this.isIframeLoaded=!1,this.globalParam=t,g(this)}static get observedAttributes(){return["video-id","playlist-id","video-title","play-text","poster-url","poster-fallback","short"]}connectedCallback(){if(!this.videoId||this.videoId===""){this.domContainer.textContent="";let o=document.createElement("h2");return o.id="error-message",o.textContent=this.config.textMissingVideoId,this.domContainer.appendChild(o),!1}this.setupComponent(),this.addEventListener("click",()=>{this.loadIframe()}),this.addEventListener("pointerover",()=>{h(this)},{once:!0})}get globalAutoLoad(){return this.globalParam.hasAttribute("data-autoload")}get globalAutoPlay(){return this.globalParam.hasAttribute("data-autoplay")}get globalAutoPause(){return this.globalParam.hasAttribute("data-autopause")}get globalNoPreconnect(){return this.globalParam.hasAttribute("data-no-preconnect")}get globalNoSchema(){return this.globalParam.hasAttribute("data-no-schema")}get videoId(){return encodeURIComponent(this.getAttribute("video-id")||"")}get playlistId(){return encodeURIComponent(this.getAttribute("playlist-id")||"")}get videoTitle(){return this.getAttribute("video-title")||this.config.textVideoTitle}get description(){return this.getAttribute("description")}get playText(){return this.getAttribute("play-text")}get videoStartAt(){return this.getAttribute("video-start-at")||this.config.videoStartAt}get autoLoadMargin(){return this.getAttribute("autoload-margin")}get posterUrl(){return this.getAttribute("poster-url")}get posterQuality(){return this.getAttribute("poster-quality")||this.config.posterQuality}get paramList(){return this.getAttribute("param-list")}isYouTubeShort(){return this.getAttribute("short")===""&&window.matchMedia("(max-width: 40em)").matches}get autoLoad(){return this.hasAttribute("autoload")}get autoPlay(){return this.hasAttribute("autoplay")}get autoPause(){return this.hasAttribute("autopause")}get noCookie(){return this.hasAttribute("no-cookie")}get noLazyLoad(){return this.hasAttribute("no-lazyload")}get noSchema(){return this.hasAttribute("no-schema")}get noPreconnect(){return this.hasAttribute("no-preconnect")}get posterFallback(){return this.hasAttribute("poster-fallback")}setupComponent(){let o=f(this);this.domPlayButton.setAttribute("aria-label",o),this.setAttribute("title",o),this.domImgPoster.src="",this.domPlayButton.hidden=!1,this.posterFallback?(console.log("ciao"),this.setPosterFallback()):this.posterUrl?this.setPosterCustom():this.setPoster(),(this.autoLoad||this.globalAutoLoad||this.isYouTubeShort())&&this.autoLoadIframe(),(this.autoPause||this.globalAutoPause)&&this.autoPauseVideo(),!this.noSchema&&!this.globalNoSchema&&b(this)}createIframe(){let o=this.noCookie?"-nocookie":"",r=this.playlistId?`?listType=playlist&list=${this.playlistId}&`:`${this.videoId}?`,i;if(this.paramList&&this.paramList!=="")i=this.paramList;else{let a=this.autoPlay||this.globalAutoPlay||this.autoPause||this.globalAutoPause||this.isYouTubeShort()?1:0,d=(this.autoPlay||this.globalAutoPlay)&&(this.autoLoad||this.globalAutoLoad)?1:0,y=d?1:0,v=this.videoStartAt;i=`enablejsapi=${a}&start=${v}`,d?i=`${i}&autoplay=${d}&mute=${y}`:i=`${i}&autoplay=1&mute=0`,this.isYouTubeShort()&&(i=`${i}&loop=1&modestbranding=1&playsinline=1&rel=0&playlist=${this.videoId}`)}return`<iframe title="${this.videoTitle}" credentialless allow="accelerometer;autoplay;encrypted-media;gyroscope;picture-in-picture" allowfullscreen src="https://www.youtube${o}.com/embed/${r}${i}"></iframe>`}loadIframe(){if(!this.isIframeLoaded){let o=this.createIframe();this.domContainer.insertAdjacentHTML("beforeend",o),this.domContainer.classList.add(this.config.activeIframeClass),this.isIframeLoaded=!0,this.dispatchEvent(new CustomEvent("embedYoutubeLoaded",{detail:{videoId:this.videoId,playlistId:this.playlistId,videoTitle:this.videoTitle,posterUrl:this.posterUrl},bubbles:!0,cancelable:!0}))}}autoLoadIframe(){let o={root:null,rootMargin:this.autoLoadMargin&&this.autoLoadMargin!==""?this.autoLoadMargin:"0px",threshold:0};new IntersectionObserver((i,n)=>{i.forEach(a=>{a.isIntersecting&&!this.isIframeLoaded&&(h(this),this.loadIframe(!0),n.unobserve(this))})},o).observe(this)}autoPauseVideo(){new IntersectionObserver(r=>{r.forEach(i=>{var n,a;i.isIntersecting||(a=(n=this.shadowRoot.querySelector("iframe"))==null?void 0:n.contentWindow)==null||a.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")})},{threshold:0}).observe(this)}setPosterFallback(){let o=`<svg part="poster-fallback" xmlns="http://www.w3.org/2000/svg" viewBox="0 48 294 198" width="294" height="198"><path d="M294,48 c0-8.284-6.716-15-15-15H15 C6.716,33,0,39.716,0,48v198 c0,8.284,6.716,15,15,15h264 c8.284,0,15-6.716,15-15V48z" fill="red"/><path transform="translate(0,6)" d="M124,113.134 c0-2.68,1.596-5.155,3.917-6.495 c2.32-1.34,5.263-1.34,7.583,0 l37.046,21.364 c2.32,1.34,3.771,3.815,3.771,6.495 s-1.419,5.155-3.74,6.495 l-36.999,21.364 c-1.16,0.67-2.452,1.005-3.747,1.005 s-2.755-0.335-3.915-1.005 c-2.32-1.34-3.915-3.815-3.915-6.495V113.134z" fill="white"/><path transform="translate(0,-30)" d="M263.333,232H89v1 c0,4.143-3.357,7.5-7.5,7.5 S74,237.143,74,233v-1 H30.333 c-4.143,0-7.5-3.357-7.5-7.5 s3.357-7.5,7.5-7.5h44 c0-4.143,3.357-7.5,7.5-7.5 s7.5,3.357,7.5,7.5h174 c4.143,0,7.5,3.357,7.5,7.5 S267.476,232,263.333,232z" fill="white"/><text x="147" y="95" fill="white" font-family="Verdana, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" alignment-baseline="middle">Play video</text></svg>`;this.domPosterContainer.querySelector("#img-webp").remove(),this.domPosterContainer.querySelector("#img-jpg").remove();let r=`data:image/svg+xml;charset=UTF-8,${encodeURIComponent(o)}`;this.domImgPoster.src=r,this.domImgPoster.removeAttribute("loading"),this.domImgPoster.setAttribute("alt",""),this.domPlayButton.hidden=!0,this.domPlayButton.setAttribute("aria-hidden","true")}setPosterCustom(){this.noLazyLoad&&this.domImgPoster.removeAttribute("loading"),this.domImgPoster.src=this.posterUrl,this.domImgPoster.onload=()=>{this.domImgPoster.src===this.posterUrl&&this.domImgPoster.setAttribute("alt",this.videoTitle)},this.domImgPoster.onerror=()=>{this.posterUrl&&this.setPosterFallback()}}setPoster(){let o=`https://i.ytimg.com/vi_webp/${this.videoId}/${this.posterQuality}.webp`,r=`https://i.ytimg.com/vi/${this.videoId}/${this.posterQuality}.jpg`;this.noLazyLoad&&this.domImgPoster.removeAttribute("loading");let i=new Image;i.fetchPriority="low",i.referrerPolicy="origin",i.src=o,i.onload=()=>{if(i.naturalWidth===120&&i.naturalHeight===90)return this.setPosterFallback();let a=document.createElement("source");a.id="img-webp",a.setAttribute("type","image/webp");let d=document.createElement("source");d.id="img-jpg",d.setAttribute("type","image/jpeg"),this.domPosterContainer.prepend(a,d),this.domPosterContainer.querySelector("#img-webp").srcset=o,this.domPosterContainer.querySelector("#img-jpg").srcset=r,this.domImgPoster.src=r}}attributeChangedCallback(o,r,i){if(r===null||r===i)return;this.scheduleUpdate&&cancelAnimationFrame(this.scheduleUpdate);let n=o==="video-id"?r:this.videoId;!this.noSchema&&!this.globalNoSchema&&this.querySelector(`#json-${n}`)&&this.querySelector(`#json-${n}`).remove(),this.scheduleUpdate=requestAnimationFrame(()=>{this.domContainer.classList.contains(this.config.activeIframeClass)&&(this.domContainer.classList.remove(this.config.activeIframeClass),this.shadowRoot.querySelector("iframe").remove(),this.isIframeLoaded=!1),this.setupComponent()})}}customElements.define("embed-youtube",e)})();})();
